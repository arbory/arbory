jQuery(function(){var a=jQuery("body"),s=a.children(".notifications").first(),u="icon fa",c={info:"fa-info",success:"fa-check",error:"fa-times-circle"},r={},y=jQuery("<i />").addClass("mt-icon").html("close"),l=jQuery('<button type="button" />').addClass("close button only-icon").append(y).attr("title",s.attr("data-close-text"));l.click(function(){var t=jQuery(this).closest(".notification").attr("data-id");a.trigger("notificationremove",t)});var v=function(t){var n;do n=Math.random().toString(16).slice(2);while(typeof r[n]<"u");var i={id:n,type:"info",closable:!0,duration:"closable"in t&&!t.closable?null:5,message:"",html:null,icon:"type"in t&&t.type in c?c[t.type]:c.info};return jQuery.extend(i,t),i},p=function(t){var n=[];return typeof t=="string"?n.push(t):typeof t=="object"&&jQuery.each(r,function(i,e){var o=e.data("params"),d=!0;jQuery.each(t,function(f,m){if(typeof o[f]>"u"||o[f]!==m)return d=!1,!1}),d&&n.push(i)}),n};a.on("notificationsinit",function(){a.on("notificationadd",function(t,n){var i,e=v(n),o=!1;typeof r[e.id]>"u"&&(o=!0,i=jQuery("<div />").addClass("notification").attr("data-id",e.id),i.append(jQuery("<i />")),i.append(jQuery("<div />").addClass("content")),r[e.id]=i,i.hide(),i.appendTo(s)),i=r[e.id],i.data("params",e),i.attr("data-type",e.type),i.children("i").removeClass().addClass(u+" "+e.icon),e.closable&&i.find(".close").length===0?i.append(l.clone(!0)):e.closable||i.find(".close").remove(),typeof e.html!="string"&&(e.html=jQuery("<div />").addClass("message").text(e.message)),i.find(".content").html(e.html),o?i.fadeIn("slow",function(){a.trigger("notificationadded",{notification:i})}):a.trigger("notificationupdated",{notification:i})}),a.on("notificationremove",function(t,n){var i=p(n);jQuery.each(i,function(e,o){if(!(typeof r[o]>"u")){var d=r[o],f=d.data("removal-timer");clearTimeout(f),d.fadeOut("fast",function(){d.css({opacity:0}).show().slideUp("fast",function(){d.remove()})}),delete r[o]}})}),a.on("notificationremovedelayed",function(t,n){var i=n.id;if(!(typeof r[i]>"u")){var e=r[i];e.data("removal-timer",setTimeout(function(){a.trigger("notificationremove",i)},n.duration*1e3))}}),a.on("notificationadded notificationupdated",function(t,n){if("notification"in n){var i=n.notification,e=i.data("params"),o=i.data("removal-timer");if(clearTimeout(o),e.duration){var d={id:e.id,duration:e.duration};a.trigger("notificationremovedelayed",d)}}}),a.on("notificationaddflash",".flash",function(){var t={type:jQuery(this).attr("data-type"),message:jQuery(this).text().trim()},n=jQuery(this).attr("data-id");typeof n<"u"&&(t.id=n),a.trigger("notificationadd",t),jQuery(this).remove()})}),a.trigger("notificationsinit"),a.on("contentloaded",function(t){jQuery(t.target).find(".flash").trigger("notificationaddflash")})});
