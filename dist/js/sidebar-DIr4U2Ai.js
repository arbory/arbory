jQuery(function(){var e=jQuery("body"),c=jQuery("<div />").addClass("side-compact-overlay").appendTo(e);c.bind("click",function(){e.trigger("sidecompactcloseall")});var t=jQuery();e.on("sidecompactcloseall",function(){t.filter(".open").trigger("sidecompactitemclose")}),e.on("contentloaded",function(s){var i=jQuery(s.target).find("header").addBack().filter("body > header");i.length<1||i.on("click",function(){if(!(!e.hasClass("side-compact")||t.filter(".open").length<1))return e.trigger("sidecompactcloseall"),!1})}),e.on("contentloaded",function(s){var i=jQuery(s.target).find("aside").addBack().filter("body > aside");i.length<1||(t=i.find("nav > ul > li"),t.on("sidecompactitemopen",function(){e.trigger("sidecompactcloseall"),jQuery(this).addClass("open"),c.show()}),t.on("sidecompactitemclose",function(){jQuery(this).removeClass("open"),c.hide()}),t.on("sidecompacttoggle",function(){var a=jQuery(this),o=a.is(".open")?"sidecompactitemclose":"sidecompactitemopen";a.trigger(o)}),i.find(".compacter button").on("click",function(){var a=jQuery(this),o=a.find("i").first(),r;e.hasClass("side-compact")?(e.trigger("sidecompactcloseall"),e.trigger("settingssave",["arbory.side.compact",!1]),e.removeClass("side-compact"),o.removeClass("collapsed"),r="title-collapse"):(e.trigger("settingssave",["arbory.side.compact",!0]),e.addClass("side-compact"),o.addClass("collapsed"),r="title-expand"),a.attr("title",a.data(r)),e.trigger("sidecompactchange")}))})});
