jQuery(function(){let l=jQuery("#global-search-form"),s=l.find(".global-search-input"),f=l.attr("action"),c=l.find(".results-list"),e=c.find(".records"),i=c.find(".close"),g=l.data("min-length"),u=$("<span>",{class:"loading"}),m=$("<span>",{class:"loading-dots"});s.on("input",T(function(n){!n.currentTarget.value||n.currentTarget.value.length<g||(b(),$.post(f,l.serializeArray(),function(o){if(i.show(),v(),o.no_results){let t=$("<div>");$("<h4/>").text(o.no_results).appendTo(t),t.appendTo(e);return}$.each(o,function(t,a){let r=$("<div>");$("<h4/>").text(t).appendTo(r);let x=$("<ul/>").appendTo(r);$.each(a,function(w,d){let h=$("<li/>").appendTo(x);$("<i />",{class:"mt-icon",text:"arrow_right_alt"}).appendTo(h),$("<a />",{href:d.url,text:d.title}).appendTo(h)}),r.appendTo(e)}),e.show()}))})),i.on("click",function(){p()});function p(){e.hide(),e.html(""),i.hide(),s.val("")}function T(n,o=500){let t;return(...a)=>{clearTimeout(t),t=setTimeout(()=>{n.apply(this,a)},o)}}function b(){e.html(""),e.show(),m.appendTo(u),u.appendTo(e)}function v(){e.find(".loading").remove()}$(document).on("click",n=>{$(n.target).parents("form#global-search-form").length===0&&p()})});
