import{U as j}from"./UrlBuilder-DtWhPO4P.js";jQuery(function(){var g=jQuery("body");g.on("searchinit","form",function(h){var s,c,r=jQuery(h.target),l="input, select",u=jQuery("#grid-filter"),a=r.data("search-options"),y={result_blocks:{main_section:{result_selector:"section",target:"main > section:first"}},rebind:!1};a=jQuery.extend(!0,y,a);var i={inputs:jQuery(),submit:jQuery()},f=function(){i.inputs=jQuery(l),i.submit=r.find('button[type="submit"]')},d=function(){i.inputs.each(function(){var e=jQuery(this);e.data("previous-value",v(e))})},v=function(e){return e.is('input[type="checkbox"]:not(:checked)')?"":e.is('input[type="checkbox"]:checked')?e.val()||"":e.val()},m=function(){clearTimeout(c),d(),s&&s.abort(),c=setTimeout(function(){i.submit.trigger("loadingstart");var e=r.attr("action"),t=new j({baseUrl:e});t.add(r.serializeArray()),t.add(u.serializeArray()),"replaceState"in window.history&&window.history.replaceState(window.history.state,window.title,t.getUrl()),t.add({ajax:1}),s=jQuery.ajax({url:t.getUrl(),success:function(n){r.trigger("searchresponse",n),r.trigger("searchend")}})},200)},p=function(){i.submit.trigger("loadingend")},_=function(){var e=jQuery(this);v(e)!==e.data("previous-value")&&r.trigger("searchstart")};u.length&&r.on("submit",function(e){return u.trigger("submit"),!1}),r.on("searchresponse",function(e,t){t=jQuery("<div />").append(t);for(var n in a.result_blocks)if(a.result_blocks.hasOwnProperty(n)){var o=a.result_blocks[n],b=t.find(o.result_selector).first().html();jQuery(o.target).html(b),jQuery(o.target).trigger("contentloaded")}a.rebind&&f()}),r.on("change keyup",l,_),r.on("searchstart",m),r.on("searchend",p),f(),d()}),jQuery(".view-index form.search").trigger("searchinit")});
