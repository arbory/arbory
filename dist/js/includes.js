(self.webpackChunkarbory=self.webpackChunkarbory||[]).push([[568],{4036:(t,e,n)=>{var i=n(9755),o=n(9755);i(document).ready((function(){o(".js-accordion-trigger").on("click",(function(t){t.preventDefault();var e=o(t.target).closest(".accordion"),n=o(e).children(".body"),i=o(e).find(".fa");n.slideToggle(150),i.toggleClass("fa-minus"),i.toggleClass("fa-plus")}))}))},217:(t,e,n)=>{var i=n(9755);i(document).ready((function(){var t=i("body");t.on("contentreplace",(function(t,e,n){if(e&&"status"in e&&"getResponseHeader"in e){if(200!==e.status)return;var o=e.getResponseHeader("content-type");if(!o||!o.match(/html/))return;e=e.responseText}var a;a=void 0!==n?(e=i("<html />").append(e)).find(n):e;var r=i(t.target);void 0!==n&&(r.is(n)||(r=r.find(n))),r.replaceWith(a),a.trigger("contentloaded")})),setTimeout((function(){t.trigger("contentloaded"),t.trigger("contentdone")}),0)}))},5140:(t,e,n)=>{"use strict";n(7729),n(7285);var i=n(8761),o=n(9755);o(document).ready((function(){var t,e="a.ajaxbox",n=o("body"),a={},r=function(t){var e={showCloseBtn:!1,modal:t.modal,callbacks:{open:function(){this.contentContainer.trigger("ajaxboxaftershow",[this,t])},beforeClose:function(){this.contentContainer.trigger("ajaxboxbeforeclose")}}};"image"===t.type?(e.items={src:t.url},e.type="image"):e.items={src:t.content,type:"inline"},o.magnificPopup.open(e)},s=function(){o.magnificPopup.close()};n.on("ajaxboxaftershow",(function(t,e,i){if(e.contentContainer.addClass("ajaxbox-inner"),void 0!==e.wrap.draggable&&e.wrap.draggable({handle:e.contentContainer.find("section header").first()}),!i.modal){var a=e.contentContainer.first();if("image"!==i.type&&(a=e.contentContainer.find("section header").first()),a.length>0){var r=o("<i />").addClass("mt-icon").html("close"),l=o("<button />").attr("type","button").addClass("button secondary close only-icon").append(r);l.on("click",(function(){s()})),a.append(l)}}var c=e.contentContainer.find('section footer .button[data-type="cancel"]').first();c.length>0&&(c.bind("click",(function(){return n.trigger("ajaxboxclose"),!1})),c.focus()),e.contentContainer.trigger("contentloaded"),e.contentContainer.trigger("ajaxboxdone",i)})),n.on("ajaxboxinit",(function(t){var n=o(t.target);(n.is(e)?n:n.find(e)).on("click",(function(){var t=o(this),e={url:new i.Z(t.attr("href")).add({ajax:1}).getUrl(),modal:t.is("[data-modal]"),trigger:t,cache:t.is("[data-cache]")};return"image"===t.attr("rel")&&(e.type="image"),t.trigger("ajaxboxopen",e),!1}))})),n.on("ajaxboxopen",(function(e,n){"cache"in n&&!0===n.cache&&(n.url in a&&(n.content=a[n.url]));"content"in n?r(n):"url"in n&&("trigger"in n&&n.trigger.trigger("loadingstart"),t&&t.abort(),t=o.ajax({url:n.url,type:"get",success:function(t){n.content=t,r(n),n.cache&&(a[n.url]=t)}}))})),n.on("ajaxboxdone",(function(t,e){e&&"trigger"in e&&e.trigger.trigger("loadingend"),o(t.target).find(".dialog").trigger("contentdone")})),n.on("ajaxboxclose",(function(){s()})),n.on("contentloaded",(function(t){o(t.target).trigger("ajaxboxinit")}))}))},3474:(t,e,n)=>{var i=n(9755);i(document).ready((function(){i("body").on("click",".constructor-dialog .js-select-block",(function(t){t.preventDefault();var e=i(t.target),n=e.data("name"),o=e.data("field"),a=i("body").find('.type-constructor[data-namespaced-name="'.concat(o,'"]')),r=a.data("templates");n in r&&(a.trigger("nestedfieldscreate",{target_block:a,template:i(r[n])}),i("body").trigger("ajaxboxclose"))}))}))},8080:(t,e,n)=>{var i=n(9755);i((function(){i("body").on("contentdone",(function(t){i(t.target).find(".dialog").addBack(".dialog").addClass("initialized")}))}))},5241:(t,e,n)=>{var i=n(9755);i(document).ready((function(){var t=i("body");i(document).bind("associatedsetsinit",(function(t){var e=".field.type-associated-set",n=i(t.target);n.is(e)||(n=n.find(e)),n.each((function(){i(this).find("input.keep").bind("click",(function(){var t=i(this);t.siblings("input.destroy").val(t.prop("checked")?"false":"true")}))}))})),t.on("contentloaded",(function(t,e){i(t.target).trigger("associatedsetsinit",e)}))}))},4046:(t,e,n)=>{"use strict";n(4414),n(5326);var i=n(9755);i(document).ready((function(){var t=i("body"),e=function(t){setTimeout((function(){i(t.dpDiv[0]).find(".ui-datepicker-prev").removeClass().addClass("button only-icon previous").html('<i class="mt-icon">chevron_left</i>'),i(t.dpDiv[0]).find(".ui-datepicker-next").removeClass().addClass("button only-icon next").html('<i class="mt-icon">chevron_right</i>')}),0)};t.on("calendarsinit",(function(t){var n=i(t.target),o={controlType:"select",showHour:!0,showMinute:!0,showTimezone:!1,showMillisec:!1,showMicrosec:!1,changeMonth:!0,changeYear:!0,beforeShow:function(t,n){e(n)},onChangeMonthYear:function(t,n,i){e(i)}};n.find(".date-picker").each((function(){var t=i(this),e=o;e.dateFormat=t.data("date-format")||"yy-mm-dd",e.minDate=t.data("min-date"),e.maxDate=t.data("max-date"),t.datepicker(e)})),n.find(".datetime-picker").each((function(){var t=i(this),e=o;e.dateFormat=t.data("date-format")||"yy-mm-dd",e.pickerTimeFormat=t.data("time-format")||"HH:mm",e.minDate=t.data("min-date"),e.maxDate=t.data("max-date"),t.datetimepicker(e)})),n.find(".time-picker").each((function(){var t=i(this);o.pickerTimeFormat=t.data("time-format")||"HH:mm",t.timepicker(o)}))})),t.on("contentloaded",(function(t){i(t.target).trigger("calendarsinit")}))}))},3710:(t,e,n)=>{var i=n(9755),o=n(9755);i(document).ready((function(){var t=o(".js-filter-trigger"),e=o(".form-filter"),n=o("#main > .content"),i="search";function a(){o("<input />").attr("type","hidden").attr("name",i).attr("value",o("#".concat(i)).val()).appendTo(e)}e.submit((function(t){return a(),!0})),t.on("click",(function(){e.toggleClass("show"),n.toggleClass("show-filter")})),o("body").on("contentdone",".js-save-filter-dialog",(function(t){var n=o(t.target);n.find("form").on("submit",(function(){return a(),n.find('[name="filter"]').val(e.serialize()),!0}))}))}))},2676:(t,e,n)=>{var i=n(9755);i((function(){i("body").on("loadingstart",".button",(function(t){var e=i(t.target);if(!e.hasClass("loading")){e.addClass("loading"),e.data("disabled-before-loading",e.prop("disabled")),e.prop("disabled",!0);var n=i("<i />").addClass("loader fa fa-spin fa-spinner");e.append(n)}})),i("body").on("loadingend",".button",(function(t){var e=i(t.target);e.find(".loader").remove();var n=e.data("disabled-before-loading");void 0!==n&&(n||e.prop("disabled",!1)),e.removeClass("loading")}))}))},8940:(t,e,n)=>{var i=n(9755);i((function(){var t=i("body"),e=i("<div />").addClass("localization-menu-overlay").appendTo(t);e.bind("click",(function(){t.trigger("localizationmenucloseall")})),t.bind("localizationinit",(function(n){var o,a=i(n.target);if(n.stopPropagation(),!((o=a.is(".field.i18n")?a:a.find(".field.i18n")).length<1)){o.bind("localizationmenuopen",(function(){var n=i(this);t.trigger("localizationmenucloseall");var o=n.data("localization-menu");n.attr("data-localization-menu-open",!0),o.appendTo(t),n.trigger("localizationmenuposition"),e.show(),o.show()})),o.bind("localizationmenuclose",(function(){var t=i(this),n=t.data("localization-menu"),o=t.data("localization-switch");n.hide().appendTo(o),e.hide(),t.removeAttr("data-localization-menu-open")})),o.bind("localizationmenutoggle",(function(){var t=i(this),e=t.attr("data-localization-menu-open")?"localizationmenuclose":"localizationmenuopen";t.trigger(e)})),o.bind("localizationmenuposition",(function(){var t=i(this);if(t.attr("data-localization-menu-open")){var e=t.data("localization-menu"),n=t.data("localization-switch-trigger"),o=n.offset();e.css({left:o.left+n.outerWidth()-e.outerWidth(),top:o.top+n.outerHeight()})}})),o.find(".localization-switch .trigger").click((function(){i(this).closest(".field.i18n").trigger("localizationmenutoggle")})),o.find(".localization-menu-items button").click((function(){var e=i(this),n=e.attr("data-locale"),o=e.closest(".localization-menu-items").data("field").find('.localization[data-locale="'+n+'"]');t.trigger("localizationmenucloseall"),o.trigger("localizationlocaleactivate")})),o.bind("localizationlocaleset",(function(t,e){var n=i(this),o=e.locale,a=n.find(".localization[data-locale]"),r=a.filter('[data-locale="'+o+'"]'),s=a.not(r);r.addClass("active"),s.removeClass("active"),n.find(".localization-switch .trigger .label").text(o)})),o.find(".localization").bind("localizationlocaleactivate",(function(){var e=i(this),n=e.attr("data-locale");e.closest("form").find(".field.i18n").trigger("localizationlocaleset",{locale:n}),t.trigger("settingssave",["arbory.i18n.locale",n])}));o.find('input[type!="hidden"],textarea,select').bind("focusprepare",(function(t){var e=i(t.target).closest(".localization");e.length<1||e.is(".active")||e.trigger("localizationlocaleactivate")})),o.each((function(){var t=i(this),e=t.find(".localization-switch").first();t.data("localization-switch",e),t.data("localization-switch-trigger",e.find(".trigger").first());var n=e.find("menu").first();t.data("localization-menu",n),n.data("field",t)}))}})),t.bind("localizationmenucloseall",(function(){t.find(".field.i18n[data-localization-menu-open]").trigger("localizationmenuclose")})),t.on("contentloaded",(function(t){i(t.target).trigger("localizationinit")}))}))},9403:(t,e,n)=>{n(9755)(document).ready((function(t){var e,n,i,o,a=t(".bulk-edit-grid");function r(){e.attr("href",s)}function s(){var e=n.filter(":checked").serializeArray();return o+(o.indexOf("?")>=0?"&":"?")+t.param(e)}function l(){n.prop("checked",this.checked),r()}t("body").on("contentloaded",(function(e,n){t(e.target).trigger("bulkforminit",n)})),t(document).bind("bulkforminit",(function(s){var c=t(s.target);a.length&&(e=t(".js-bulk-edit-button",a),o=e.attr("href"),n=t(".js-bulk-edit-row-checkbox",a),i=t(".js-bulk-edit-header-checkbox",a),n.on("change",r),i.on("change",l)),function(e){e.find("input.bulk-control").on("change",(function(n){e.find('[name="resource['+t(this).attr("data-target")+']"]').prop("disabled",!this.checked)}))}(c=c.find(".edit-resources"))}))}))},9086:(t,e,n)=>{"use strict";var i=n(6808),o=n.n(i),a=n(9755);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var c="menu",d="li[data-name]",u=function(){function t(e){r(this,t),this.element=e}return l(t,[{key:"getItemElements",value:function(){return this.element.find(d)}},{key:"getItems",value:function(){var t=this,e=[];return a.each(this.getItemElements(),(function(n,i){e.push(new f(t,a(i)))})),e}},{key:"collapseItems",value:function(){a.each(this.getItems(),(function(t,e){e.collapseItems()}))}},{key:"isCompact",value:function(){return this.element.closest("body").hasClass("side-compact")}}]),t}(),f=function(){function t(e,n){r(this,t),this.menu=e,this.element=n,this.name=n.data("name")}return l(t,[{key:"getStorage",value:function(){return g.get(this.name)}},{key:"getChildBlockElement",value:function(){return this.element.find(".block:first")}},{key:"getChildElements",value:function(){return this.getChildBlockElement().children(d)}},{key:"hasChildren",value:function(){return this.getChildElements().length}},{key:"getIconElement",value:function(){return this.element.children(".trigger").find(".collapser i")}},{key:"toggleItems",value:function(){this.hasChildren()&&(this.menu.isCompact()&&this.menu.collapseItems(),this.isCollapsed()?this.expandItems():this.collapseItems())}},{key:"isCollapsed",value:function(){return this.menu.isCompact()?!this.element.hasClass("open"):this.element.hasClass("collapsed")}},{key:"collapseItems",value:function(){this.menu.isCompact()?this.element.removeClass("open"):this.element.addClass("collapsed")}},{key:"expandItems",value:function(){this.menu.isCompact()?this.element.addClass("open"):this.element.removeClass("collapsed")}},{key:"updateIcon",value:function(){this.getIconElement().toggleClass("collapsed",this.menu.isCompact())}}]),t}(),g=function(){function t(){r(this,t)}return l(t,null,[{key:"getStored",value:function(){var e=o().getJSON(c);return void 0===e?(t.save({}),{}):e}},{key:"get",value:function(e){var n=this.getStored();return void 0===n[e]&&(n[e]=null,t.save(n)),new h(e,n[e])}},{key:"saveItem",value:function(e){var n=this.getStored();n[e.id]=e.getContents(),t.save(n)}},{key:"save",value:function(t){o().set(c,JSON.stringify(t))}}]),t}(),h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.id=e,this.contents=n}return l(t,[{key:"getContents",value:function(){return this.contents}},{key:"isCollapsed",value:function(){return this.contents}},{key:"setCollapsed",value:function(t){this.contents=t,this.save()}},{key:"save",value:function(){g.saveItem(this)}}]),t}();a(document).ready((function(){var t=new u(a("aside nav > ul"));a.each(t.getItems(),(function(e,n){n.updateIcon(),n.element.find(".trigger:first").on("click",(function(){n.toggleItems(),n.updateIcon(),!t.isCompact()&&n.hasChildren()&&n.getStorage().setCollapsed(n.isCollapsed())}))}))}))},2307:(t,e,n)=>{var i=n(9755);i(document).ready((function(){var t=i("body");i(document).bind("nestedfieldsinit",(function(t){var e=i(t.target);e.is(".nested")||(e=e.find(".nested")),e.each((function(){var t=i(this),e=t.find(".list").first(),n=t.attr("data-name"),o='.item[data-name="'+n+'"]',a='.item[data-name="'+n+'"].new',r='.item[data-name="'+n+'"]:not(.new)';t.click((function(e,a){var r=i(e.target);if(r.is("button")||(r=r.parents("button").first()),(r.is("button.add-nested-item")||r.is("button.remove-nested-item"))&&!r.prop("disabled")){var s=r.parents(".nested").first();if(s.attr("data-name")===n)if(r.is(".add-nested-item")){var l=null;if(s.is(".polymorphic")){var c=s.find("footer select.template-types");l=i(c.find("option:selected").data("template"))}else l=i(s.data("arbory-template"));t.trigger("nestedfieldscreate",{target_block:s,original_params:a,template:l})}else r.is(".remove-nested-item")&&t.trigger("nestedfieldsremove",{target_block:s,item:r.parents(o).first(),original_params:a})}})),t.on("nestedfieldscreate",(function(t,i){var o=i.target_block,a=i.original_params,r=i.template;if(o.attr("data-name")===n){if(1!==r.length)return null;var s=r;s.addClass("new"),s.appendTo(e),s.trigger("nestedfieldsreindex",a),a&&a.no_animation?(s.trigger("nestedfieldsitemadd",a),s.trigger("contentloaded",a)):s.is("tr, td")?(s.css({opacity:1}).hide(),s.fadeIn("normal",(function(){s.trigger("nestedfieldsitemadd",a),s.trigger("contentloaded",a)}))):(s.css({opacity:0}),s.slideDown("fast",(function(){s.css({opacity:1}).hide(),s.fadeIn("fast",(function(){s.trigger("nestedfieldsitemadd",a),s.trigger("contentloaded",a)}))})))}})),t.on("nestedfieldsremove",(function(t,e){var i=e.target_block,o=e.item,a=e.original_params;if(i.attr("data-name")===n){var r=function(t){t.trigger("contentbeforeremove",a);var e=t.parent(),n=t.find("input.destroy");n.length>0?(n.val(!0),t.hide()):t.remove(),i.trigger("nestedfieldsreindex",a),e.trigger("contentremoved",a)};o.addClass("removed"),o.trigger("nestedfieldsitemremove",a),a&&a.no_animation?r(o):o.fadeOut("fast",(function(){o.is("tr,td")?r(o):o.css({opacity:0}).show().slideUp("fast",(function(){r(o)}))}))}})),t.on("nestedfieldsreindex",(function(){var e=0;t.find(r).each((function(){var t=i(this).attr("data-index");void 0!==t&&(t*=1)>=e&&(e=t+1)}));var o=t.find(a),s=e,l=[];o.each((function(){var t=i(this);t.attr("data-index",s);var e=new RegExp("(\\[|_)"+n+"(\\]\\[|_)(\\d*|_template_)?(\\]|_)"),o=new RegExp("((\\[|_)"+n+"(\\]\\[|_))(\\d*|_template_)?(\\]|_)","g"),a="$1"+s+"$5",r=["name","id","for"];t.find("input,select,textarea,button,label").each((function(){for(var t=0;t<r.length;t++){var n=i(this).attr(r[t]);if(n&&n.match(e)){var s={element:this,attribute:r[t],old_value:n,new_value:n.replace(o,a)};if(s.old_value===s.new_value)continue;l.push(s)}}})),s++}));i.each(l,(function(t,e){var n=i(e.element);n.trigger("beforeattributechange",e),n.attr(e.attribute,"nestedfieldsreindex_temporary_value_"+t)})),i.each(l,(function(t,e){var n=i(e.element);n.attr(e.attribute,e.new_value),n.trigger("attributechanged",e)}))})),t.on("sortableupdate",(function(){t.trigger("nestedfieldsreindex")})),t.on("nestedfieldsitemadd",(function(t){var e=i(t.target);e.attr("data-name")===n&&e.find("input, select, textarea").filter(":visible").first().focus()}))}))})),t.on("contentloaded",(function(t,e){i(t.target).trigger("nestedfieldsinit",e)}))}))},1509:(t,e,n)=>{"use strict";n(2526);var i=n(6808),o=n.n(i);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;a(this,t),this.id=e,this.contents=n,this.store=i}var e,n,i;return e=t,(n=[{key:"getContents",value:function(){return this.contents}},{key:"isCollapsed",value:function(){return this.contents}},{key:"setCollapsed",value:function(t){this.contents=t,this.save()}},{key:"save",value:function(){this.store&&this.store.saveItem(this)}}])&&r(e.prototype,n),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d={},u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storeName=e,d[e]=this}var e,n,i;return e=t,i=[{key:"getInstance",value:function(t){return d[t]}}],(n=[{key:"getStored",value:function(){var t=o().getJSON(this.storeName);return"object"!==l(t)?(this.save({}),{}):t}},{key:"get",value:function(t){var e=this.getStored();return void 0===e[t]&&(e[t]=!0,this.save(e)),new s(t,e[t],this)}},{key:"saveItem",value:function(t){var e=this.getStored();e[t.id]=t.getContents(),this.save(e)}},{key:"save",value:function(t){o().set(this.storeName,t)}}])&&c(e.prototype,n),i&&c(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var g=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.store=n,this.id=e.data("id"),this.level=e.data("level")}var e,n,i;return e=t,(n=[{key:"getStorage",value:function(){return this.store?this.store.get(this.id):null}},{key:"makeSortable",value:function(t){return this.element.parent().sortable(t)}},{key:"toggleChildVisibility",value:function(){var t=this.getStorage();t&&t.setCollapsed(!t.isCollapsed()),this.isCollapsed()?this.element.removeClass("collapsed"):this.element.addClass("collapsed")}},{key:"isCollapsed",value:function(){return this.element.hasClass("collapsed")}},{key:"getParent",value:function(){var e="li[data-level="+--this.level+"]";return new t(this.element.closest(e),this.store)}},{key:"getLeftSibling",value:function(){return new t(this.element.prev("li[data-id]"),this.store)}},{key:"getRightSibling",value:function(){return new t(this.element.next("li[data-id]"),this.store)}}])&&f(e.prototype,n),i&&f(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),h=n(9755);function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var m=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;v(this,t),this.repositionUrl=n,this.collection=h(e),this.store=i?new u(i):null,this.initialize()}var e,n,i;return e=t,i=[{key:"getToken",value:function(){return h("[name=_token]:first").val()}}],(n=[{key:"initialize",value:function(){var t=this;this.collection.data("tree",this),h("body").on("click",".dialog .node-cell label",this.onDialogLabelClick.bind(this)),h(document).ready((function(){t.collection.find("ul[data-level] > li").each((function(e,n){var i=new g(h(n),t.store);i.element.on("click","> .collapser-cell > .collapser",(function(){return i.toggleChildVisibility()})),i.makeSortable({items:"> li",stop:function(e,n){i=new g(n.item,t.store),t.send(i)}})}))}))}},{key:"onDialogLabelClick",value:function(t){h(".dialog .node-cell label").removeClass("selected"),h(t.target).addClass("selected")}},{key:"send",value:function(e){h.post(this.repositionUrl,{_token:t.getToken(),id:e.id,toLeftId:e.getLeftSibling().id,toRightId:e.getRightSibling().id})}}])&&p(e.prototype,n),i&&p(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),b=n(9755);b(document).ready((function(){var t=b("body.controller-nodes .collection");new m(t,t.data("reposition-url")||window.NODE_REPOSITION_BASEPATH,t.data("store-name")||"nodes")}))},7220:(t,e,n)=>{var i=n(9755);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}i((function(){var t=i("body"),e=t.children(".notifications").first(),n={info:"fa-info",success:"fa-check",error:"fa-times-circle"},a={},r=i("<i />").addClass("mt-icon").html("close"),s=i('<button type="button" />').addClass("close button only-icon").append(r).attr("title",e.attr("data-close-text"));s.click((function(){var e=i(this).closest(".notification").attr("data-id");t.trigger("notificationremove",e)}));t.on("notificationsinit",(function(){t.on("notificationadd",(function(o,r){var l,c=function(t){var e;do{e=Math.random().toString(16).slice(2)}while(void 0!==a[e]);var o={id:e,type:"info",closable:!0,duration:"closable"in t&&!t.closable?null:5,message:"",html:null,icon:"type"in t&&t.type in n?n[t.type]:n.info};return i.extend(o,t),o}(r),d=!1;void 0===a[c.id]&&(d=!0,(l=i("<div />").addClass("notification").attr("data-id",c.id)).append(i("<i />")),l.append(i("<div />").addClass("content")),a[c.id]=l,l.hide(),l.appendTo(e)),(l=a[c.id]).data("params",c),l.attr("data-type",c.type),l.children("i").removeClass().addClass("icon fa "+c.icon),c.closable&&0===l.find(".close").length?l.append(s.clone(!0)):c.closable||l.find(".close").remove(),"string"!=typeof c.html&&(c.html=i("<div />").addClass("message").text(c.message)),l.find(".content").html(c.html),d?l.fadeIn("slow",(function(){t.trigger("notificationadded",{notification:l})})):t.trigger("notificationupdated",{notification:l})})),t.on("notificationremove",(function(t,e){var n=function(t){var e=[];return"string"==typeof t?e.push(t):"object"===o(t)&&i.each(a,(function(n,o){var a=o.data("params"),r=!0;i.each(t,(function(t,e){if(void 0===a[t]||a[t]!==e)return r=!1,!1})),r&&e.push(n)})),e}(e);i.each(n,(function(t,e){if(void 0!==a[e]){var n=a[e],i=n.data("removal-timer");clearTimeout(i),n.fadeOut("fast",(function(){n.css({opacity:0}).show().slideUp("fast",(function(){n.remove()}))})),delete a[e]}}))})),t.on("notificationremovedelayed",(function(e,n){var i=n.id;void 0!==a[i]&&a[i].data("removal-timer",setTimeout((function(){t.trigger("notificationremove",i)}),1e3*n.duration))})),t.on("notificationadded notificationupdated",(function(e,n){if("notification"in n){var i=n.notification,o=i.data("params"),a=i.data("removal-timer");if(clearTimeout(a),o.duration){var r={id:o.id,duration:o.duration};t.trigger("notificationremovedelayed",r)}}})),t.on("notificationaddflash",".flash",(function(){var e={type:i(this).attr("data-type"),message:i(this).text().trim()},n=i(this).attr("data-id");void 0!==n&&(e.id=n),t.trigger("notificationadd",e),i(this).remove()}))})),t.trigger("notificationsinit"),t.on("contentloaded",(function(t){i(t.target).find(".flash").trigger("notificationaddflash")}))}))},6004:()=>{Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},writable:!0,configurable:!0})},5548:(t,e,n)=>{"use strict";var i=n(8761),o=n(9755);o((function(){o("body").on("contentloaded",(function(t){o(t.target).find('.pagination select[name="page"]').on("change",(function(){var t=o(this).val();t&&(window.location.href=new i.Z(window.location.href).add({page:t}).getUrl())}))}))}))},6574:(t,e,n)=>{var i=n(9755),o=n(9755),a=function(t){var e=this,n=i("body"),o='input[type!="hidden"],textarea,select';e.form=t,e.clicked_button=null,e.form.on("click",'input[type="submit"], input[type="image"], button',(function(t){var n=i(t.target),o=n.closest("button");o.length>0&&(n=o),n.is("button")&&"submit"!==n[0].type||(e.clicked_button=n)})),e.form.on("ajax:beforeSend",(function(t,n){n.validation_id="v"+(new Date).getTime()+Math.random(),e.form.attr("data-validation-id",n.validation_id),e.clicked_button&&e.clicked_button.trigger("loadingstart")})),e.form.on("ajax:complete",(function(t,n){var o,a={validation_id:n.validation_id};switch(n.status){case 303:try{o=i.parseJSON(n.responseText)}catch(t){e.form.trigger("validation:fail",[e,a]);break}a.response=o,e.form.trigger("validation:ok",[e,a]);break;case 200:a.response=n,e.form.trigger("validation:ok",[e,a]);break;case 422:try{o=i.parseJSON(n.responseText)}catch(t){e.form.trigger("validation:fail",[e,a]);break}a.response=o;var r=[];i.each(o.errors,(function(t,e){i.each(e,(function(e,n){if(t.indexOf(".")>-1){var i=t.split(".");t=i.shift()+"["+i.join("][")+"]"}var o={message:n,fieldName:t};r.push(o)}))})),i.each(r,(function(t,n){var i;i=e.form.find('[name="'+n.fieldName+'"],[name="'+n.fieldName+'[]"]').filter(':not([type="hidden"])').first(),a.error=n,(i&&i.length>0?i:e.form).trigger("validation:error",[e,a])}));break;default:e.form.trigger("validation:fail",[e,a])}e.form.trigger("validation:end",[e,a])})),e.form.on("validation:ok",(function(t,e,i){i&&i.response&&("url"in i.response?(t.preventDefault(),document.location.href=i.response.url):"getResponseHeader"in i.response&&(t.preventDefault(),n.trigger("contentreplace",[i.response,"> header"]),n.trigger("contentreplace",[i.response,"> aside"]),n.trigger("contentreplace",[i.response,"> main"])))})),e.form.on("validation:error",(function(t,e,n){var a=null,r=n.error,s=i(t.target),l=s.is("form")?s:s.closest("form");if(s.is(o)){var c=s.parents(".field:not(.localization)").first();if(1!==c.length)return;var d=c.is(".i18n")?s.closest(".localization"):c,u=d.find(".error-box");u.length<1&&(u=i('<div class="error-box"><div class="error"></div></div>')).appendTo(d.find(".value").first()),(a=u.find(".error")).attr("data-validation-id",n.validation_id),a.text(r.message),c.addClass("has-error"),c.is(".i18n")&&d.addClass("has-error")}else if(s.is("form")){var f=l.find(".form-error-box");if(f.length<1){var g=l.find(".body").first();g.length<1&&(g=l),(f=i('<div class="form-error-box"></div>')).prependTo(g)}f.find(".error").each((function(){a||i(this).text()===r.message&&(a=i(this))}));var h=!a;a||(a=i('<div class="error"></div>')),a.attr("data-validation-id",n.validation_id),a.text(r.message),h&&a.appendTo(f),l.addClass("has-error"),f.parent().scrollTop(f.offset().top-f.parent().offset().top+f.parent().scrollTop())}l.find(".button.loading").trigger("loadingend")})),e.form.on("validation:end",(function(e,n,i){var a=t.attr("data-validation-id");if(i.validation_id===a){i.except_validation_id=a,t.trigger("validation:clearerrors",[n,i]);var r=t.find(".field.has-error").filter(":visible").find(o).not(".localization:not(.has-error) *").first();r.trigger("focusprepare"),r.focus()}})),e.form.on("validation:clearerrors",(function(e,n,o){var a=o&&"except_validation_id"in o?o.except_validation_id:null;if(t.find(".field.has-error").each((function(){var t=i(this);t.find(".error-box").each((function(){var e=i(this),n=e.find(".error");a&&n.attr("data-validation-id")===a||(t.is(".i18n")&&e.closest(".localization").removeClass("has-error"),e.remove())})),t.find(".error-box").length<1&&t.removeClass("has-error")})),t.hasClass("has-error")){var r=t.find(".form-error-box"),s=!1;r.find(".error").each((function(){var t=i(this);a&&t.attr("data-validation-id")===a?s=!0:t.remove()})),s||(r.remove(),t.removeClass("has-error"))}})),i(document).on("validation:ok validation:error validation:fail","form",(function(t,n){if(n===e&&e.form[0])switch(t.type){case"validation:ok":case"validation:fail":e.submit_form();break;case"validation:error":e.clicked_button=null}}))};a.prototype.submit_form=function(){var t=this;if(t.clicked_button){var e=t.clicked_button.first(),n=e.attr("name");if(n){var o=t.form.find('input[type="hidden"][name="'+n+'"]');o.length<1&&(o=i("<input />").attr("type","hidden").attr("name",e.attr("name"))).appendTo(t.form),o.val(e.val())}}t.form[0].submit()},i((function(){i(document).on("validation:init","form",(function(t){var e=this;if(!t.isDefaultPrevented()){var n=i(t.target);n.data("validator")||(n.data("validator",new a(n)),n.attr("data-remote-validation-initialized",!0),i(".main .primary .button[name=save], .main .primary .button[name=save_and_return], .edit-resources .primary .button[name=save]").click((function(t){t.preventDefault(),n.data("validator").clicked_button=i(t.target),n.trigger("beforevalidation");var a=new FormData(e);o.ajax({type:"POST",url:n.attr("action"),data:a,cache:!1,contentType:!1,processData:!1,beforeSend:function(t){n.trigger("ajax:beforeSend",[t])},complete:function(t){n.trigger("ajax:complete",[t])}})})))}})),i("body").on("contentloaded",(function(t){var e=i(t.target);(e.is("form[data-remote-validation]")?e:e.find("form[data-remote-validation]")).trigger("validation:init")}))}))},4991:(t,e,n)=>{"use strict";var i=n(8761),o=n(9755);o((function(){o("body").on("searchinit","form",(function(t){var e,n,a=o(t.target),r="input, select",s=o("#grid-filter"),l=a.data("search-options");l=o.extend(!0,{result_blocks:{main_section:{result_selector:"section",target:"main > section:first"}},rebind:!1},l);var c={inputs:o(),submit:o()},d=function(){c.inputs=o(r),c.submit=a.find('button[type="submit"]')},u=function(){c.inputs.each((function(){var t=o(this);t.data("previous-value",f(t))}))},f=function(t){return t.is('input[type="checkbox"]:not(:checked)')?"":t.is('input[type="checkbox"]:checked')?t.val()||"":t.val()};s.length&&a.on("submit",(function(t){return s.trigger("submit"),!1})),a.on("searchresponse",(function(t,e){for(var n in e=o("<div />").append(e),l.result_blocks)if(l.result_blocks.hasOwnProperty(n)){var i=l.result_blocks[n],a=e.find(i.result_selector).first().html();o(i.target).html(a),o(i.target).trigger("contentloaded")}l.rebind&&d()})),a.on("change keyup",r,(function(){var t=o(this);f(t)!==t.data("previous-value")&&a.trigger("searchstart")})),a.on("searchstart",(function(){clearTimeout(n),u(),e&&e.abort(),n=setTimeout((function(){c.submit.trigger("loadingstart");var t=a.attr("action"),n=new i.Z({baseUrl:t});n.add(a.serializeArray()),n.add(s.serializeArray()),"replaceState"in window.history&&window.history.replaceState(window.history.state,window.title,n.getUrl()),n.add({ajax:1}),e=o.ajax({url:n.getUrl(),success:function(t){a.trigger("searchresponse",t),a.trigger("searchend")}})}),200)})),a.on("searchend",(function(){c.submit.trigger("loadingend")})),d(),u()})),o(".view-index form.search").trigger("searchinit")}))},5619:(t,e,n)=>{var i=n(9755);i((function(){var t=i("body"),e=i("<div />").addClass("side-compact-overlay").appendTo(t);e.bind("click",(function(){t.trigger("sidecompactcloseall")}));var n=i();t.on("sidecompactcloseall",(function(){n.filter(".open").trigger("sidecompactitemclose")})),t.on("contentloaded",(function(e){var o=i(e.target).find("header").addBack().filter("body > header");o.length<1||o.on("click",(function(){if(t.hasClass("side-compact")&&!(n.filter(".open").length<1))return t.trigger("sidecompactcloseall"),!1}))})),t.on("contentloaded",(function(o){var a=i(o.target).find("aside").addBack().filter("body > aside");a.length<1||((n=a.find("nav > ul > li")).on("sidecompactitemopen",(function(){t.trigger("sidecompactcloseall"),i(this).addClass("open"),e.show()})),n.on("sidecompactitemclose",(function(){i(this).removeClass("open"),e.hide()})),n.on("sidecompacttoggle",(function(){var t=i(this),e=t.is(".open")?"sidecompactitemclose":"sidecompactitemopen";t.trigger(e)})),a.find(".compacter button").on("click",(function(){var e,n=i(this),o=n.find("i").first();t.hasClass("side-compact")?(t.trigger("sidecompactcloseall"),t.trigger("settingssave",["arbory.side.compact",!1]),t.removeClass("side-compact"),o.removeClass("collapsed"),e="title-collapse"):(t.trigger("settingssave",["arbory.side.compact",!0]),t.addClass("side-compact"),o.addClass("collapsed"),e="title-expand"),n.attr("title",n.data(e)),t.trigger("sidecompactchange")})))}))}))},9360:(t,e,n)=>{var i=n(9755);i(document).ready((function(){var t=i("body");t.on("sortableinit",(function(t){var e=i(t.target);e.is("[data-sortable]")||(e=e.find("[data-sortable]")),e.each((function(){var t=i(this);t.is(".ui-sortable")||(t.sortable({cursor:"move",delay:150,distance:5,forcePlaceholderSize:!0,handle:"> .handle",items:"> .item",scroll:!0,start:function(t,e){e.item.trigger("sortablestart")},stop:function(t,e){e.item.trigger("sortablestop")},update:function(t,e){e.item.trigger("sortableupdate")}}),t.on("sortablereindex",(function(){t.find('> .item:visible > input[type="hidden"].item-position').each((function(t){i(this).attr("value",t)}))})),t.on("sortableupdate contentloaded contentremoved",(function(){t.trigger("sortablereindex")})),t.trigger("sortablereindex"))}))})),t.on("contentloaded",(function(t,e){i(t.target).trigger("sortableinit",e)}))}))},698:(t,e,n)=>{var i=n(9755);i((function(){var t=i("body"),e=t.data("settings-path");t.on("settingssave",(function(t,n,o){if(e){var a=n;"string"==typeof a&&((a={})[n]=o),i.ajax({url:e,data:{settings:a},type:"POST",dataType:"json"})}}))}))},1170:(t,e,n)=>{"use strict";var i=n(8761),o=n(9755);o((function(){var t,e=o("body"),n=o("<div />").addClass("toolbox-overlay").appendTo(e);n.bind("click",(function(){e.trigger("toolboxcloseall")})),e.bind("toolboxinit",(function(a){var r,s=o(a.target);a.stopPropagation(),(r=s.is(".toolbox")?s:s.find(".toolbox")).length<1||(r.bind("toolboxopen",(function(){var n=o(this);if(e.trigger("toolboxcloseall"),t&&t.abort(),n.data("url")){var a=new i.Z(n.data("url")).add({ajax:1}).getUrl();t=o.ajax({url:a,type:"get",success:function(t){n.trigger("toolboxbuild",t)}})}else n.trigger("toolboxbuild")})),r.bind("toolboxbuild",(function(t,i){var a=o(this),r=a.data("toolbox-menu"),s=a.find(".toolbox-items ul");a.attr("data-toolbox-open",!0),r.appendTo(e),a.trigger("toolboxposition"),n.show(),r.show(),void 0!==i&&s.html(i),s.trigger("contentloaded")})),r.bind("toolboxclose",(function(){var t=o(this);t.data("toolbox-menu").hide().appendTo(t),n.hide(),t.removeAttr("data-toolbox-open")})),r.bind("toolboxtoggle",(function(){var t=o(this),e=t.attr("data-toolbox-open")?"toolboxclose":"toolboxopen";t.trigger(e)})),r.bind("toolboxposition",(function(){var t=o(this);if(t.attr("data-toolbox-open")){var e=t.data("toolbox-menu"),n=t.find(".trigger"),i=n.offset(),a=i.left+n.outerWidth()/2,r=e.outerWidth(),s=o(document).width()-a-r-50>0,l=e.children("i").first();s?(e.css({left:a-23,top:i.top+n.outerHeight()}),l.css({left:18})):(e.css({left:a-r+20,top:i.top+n.outerHeight()}),l.css({left:r-24}))}})),r.find(".trigger").click((function(){o(this).closest(".toolbox").trigger("toolboxtoggle")})),r.find(".toolbox-items ul").on("contentloaded",(function(t){var e=o(t.target),n=e.data("toolbox"),i=n.find(".trigger"),a=e.find("li").find(".button");a.click((function(){n.trigger("toolboxclose")})),a.on("loadingstart",(function(){i.trigger("loadingstart")})),a.on("loadingend",(function(){i.trigger("loadingend")}))})),r.each((function(){var t=o(this),e=t.find("menu").first();t.data("toolbox-menu",e),t.find(".toolbox-items ul").data("toolbox",t),t.addClass("initialized")})))})),o(window).bind("resize",(function(){o(".toolbox[data-toolbox-open]").trigger("toolboxposition")})),e.bind("toolboxcloseall",(function(){e.find(".toolbox[data-toolbox-open]").trigger("toolboxclose")})),e.on("contentloaded",(function(t){o(t.target).trigger("toolboxinit")}))}))},9496:(t,e,n)=>{var i=n(9755);function o(t){void 0===t&&(t={});var e=!0;!1!==t&&void 0===t.baseUrl||(e=!1),"string"==typeof t&&(t={baseUrl:t}),this.path="",this.query={};var n=t.baseUrl||location.href,i=(n=n.split("#").shift()).split("?");if(this.path=i.shift(),e&&i.length>0)for(var o=i.shift().split("&"),a=0;a<o.length;a++)if(o[a].length>0){var r,s=o[a].split("="),l=s.shift();r=s.length>0?decodeURIComponent(s.shift()):"","[]"===decodeURIComponent(l).substr(decodeURIComponent(l).length-2,2)&&(l=decodeURIComponent(l)),"[]"===l.substr(l.length-2,2)?(l=l.substr(0,l.length-2),void 0!==this.query[l]&&this.query[l]instanceof Array||(this.query[l]=[]),this.query[l].push(r)):this.query[l]=r}if(void 0!==t.keep&&t.keep instanceof Array){for(var c={},d=0;d<t.keep.length;d++)void 0!==this.query[t.keep[d]]&&(c[t.keep[d]]=this.query[t.keep[d]]);this.query=c}}o.prototype.add=function(t,e){if(t instanceof Array){for(var n=0;n<t.length;n++)if(void 0!==t[n].name&&void 0!==t[n].value){var i=t[n].name;"[]"===i.substr(i.length-2,2)?(i=i.substr(0,i.length-2),void 0!==this.query[i]&&this.query[i]instanceof Array||(this.query[i]=[]),this.query[i].push(t[n].value)):this.query[t[n].name]=t[n].value}}else if(t instanceof Object)for(var a in t)t.hasOwnProperty(a)&&(this.query[a]=t[a]);else if("string"==typeof t)if(void 0===e){var r=new o("?"+t);for(var s in r.query)r.query.hasOwnProperty(s)&&(this.query[s]=r.query[s])}else this.query[t]=e;return this},o.prototype.removeAll=function(t){for(var e in this.query)void 0!==t&&-1!==i.inArray(e,t)||this.remove(e);return this},o.prototype.remove=function(t){return delete this.query[t],this},o.prototype.get=function(t){return void 0!==this.query[t]?this.query[t]:null},o.prototype.getUrl=function(){var t="",e=!0;for(var n in this.query)this.query.hasOwnProperty(n)&&(e?e=!1:t+="&",this.query[n]instanceof Array?t+=n+"[]="+this.query[n].map(encodeURIComponent).join("&"+n+"[]="):t+=n+"="+encodeURIComponent(this.query[n]));return this.path+"?"+t}},8761:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(9755);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===e&&(e={});var n=!0;!1!==e&&void 0===e.baseUrl||(n=!1),"string"==typeof e&&(e={baseUrl:e}),this.path="",this.query={};var i=e.baseUrl||location.href,o=(i=i.split("#").shift()).split("?");if(this.path=o.shift(),n&&o.length>0)for(var a=o.shift().split("&"),r=0;r<a.length;r++)if(a[r].length>0){var s,l=a[r].split("="),c=l.shift();s=l.length>0?decodeURIComponent(l.shift()):"","[]"===decodeURIComponent(c).substr(decodeURIComponent(c).length-2,2)&&(c=decodeURIComponent(c)),"[]"===c.substr(c.length-2,2)?(c=c.substr(0,c.length-2),void 0!==this.query[c]&&this.query[c]instanceof Array||(this.query[c]=[]),this.query[c].push(s)):this.query[c]=s}if(void 0!==e.keep&&e.keep instanceof Array){for(var d={},u=0;u<e.keep.length;u++)void 0!==this.query[e.keep[u]]&&(d[e.keep[u]]=this.query[e.keep[u]]);this.query=d}}var e,n,a;return e=t,(n=[{key:"add",value:function(e,n){if(e instanceof Array){for(var i=0;i<e.length;i++)if(void 0!==e[i].name&&void 0!==e[i].value){var o=e[i].name;"[]"===o.substr(o.length-2,2)?(o=o.substr(0,o.length-2),void 0!==this.query[o]&&this.query[o]instanceof Array||(this.query[o]=[]),this.query[o].push(e[i].value)):this.query[e[i].name]=e[i].value}}else if(e instanceof Object)for(var a in e)e.hasOwnProperty(a)&&(this.query[a]=e[a]);else if("string"==typeof e)if(void 0===n){var r=new t("?"+e);for(var s in r.query)r.query.hasOwnProperty(s)&&(this.query[s]=r.query[s])}else this.query[e]=n;return this}},{key:"removeAll",value:function(t){for(var e in this.query)void 0!==t&&-1!==i.inArray(e,t)||this.remove(e);return this}},{key:"remove",value:function(t){return delete this.query[t],this}},{key:"get",value:function(t){return void 0!==this.query[t]?this.query[t]:null}},{key:"getUrl",value:function(){var t="",e=!0;for(var n in this.query)this.query.hasOwnProperty(n)&&(e?e=!1:t+="&",this.query[n]instanceof Array?t+=n+"[]="+this.query[n].map(encodeURIComponent).join("&"+n+"[]="):t+=n+"="+encodeURIComponent(this.query[n]));return this.path+"?"+t}}])&&o(e.prototype,n),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}()}},t=>{var e=e=>t(t.s=e);t.O(0,[898],(()=>(e(4036),e(217),e(5140),e(3474),e(8080),e(5241),e(4046),e(3710),e(2676),e(8940),e(9403),e(9086),e(2307),e(1509),e(7220),e(6004),e(5548),e(6574),e(4991),e(5619),e(9360),e(698),e(1170),e(9496))));t.O()}]);